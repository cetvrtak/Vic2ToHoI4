sphere_decisions = {

	add_to_sphere = {
		target_trigger = {
		}
		available = {
			ROOT_has_most_influence_on_FROM = yes
			FROM = { has_government = ROOT }	#otherwise they would automatically switch to master's ideology
			FROM_can_become_free = yes
			NOT = { has_war_with = FROM }
		}
		visible = {
			FROM = { NOT = { is_subject_of = ROOT } }
			FROM_can_become_free = yes
		}
		cost = 0
		complete_effect = {
			set_autonomy = { target = FROM autonomy_state = autonomy_sphereling }
			FROM = { set_variable = { tot_autonomy = 0 } }
		}
		ai_will_do = {
			factor = 3
		}
	}

	decrease_autonomy = {
		target_trigger = {
		}
		available = {
			FROM = {
				custom_trigger_tooltip = { tooltip = autonomy_at_18_or_influenced_by_another_gp_tt }
				hidden_trigger = {
					OR = {
						compare_autonomy_progress_ratio > 0.18
						check_variable = { var = daily_autonomy_gain value = 0.3 }
					}
				}
			}
			NOT = { has_war_with = FROM }
		}
		visible = {
			FROM = {
				is_subject_of = ROOT
				has_autonomy_state = autonomy_sphereling
			}
		}
		cost = 25
		complete_effect = {
			FROM = { add_to_variable = { var = inf_count_@ROOT value = 1 } }
			FROM = {
				add_dynamic_modifier = {
					modifier = gp_influence_master
					scope = ROOT
					days = 180
				}
				subtract_from_variable = { var = daily_autonomy_gain value = 0.4 }
			}
		}
		days_remove = 180
		remove_effect = {
			FROM = {
				remove_dynamic_modifier = {
					modifier = gp_influence_master
					scope = ROOT
				}
				add_to_variable = { var = daily_autonomy_gain value = 0.4 }
			}
		}
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0.1
				FROM = { check_variable = { daily_autonomy_gain < 0.3 } }
			}
			modifier = {
				factor = 2
				FROM = { check_variable = { var = daily_autonomy_gain value = 0.6 } }
			}
		}
	}

	increase_autonomy = {
		target_trigger = {
		}
		available = {
			OR = {
				FROM = {
					custom_trigger_tooltip = {
						tooltip = cannot_become_free_tt
						FROM_can_become_free = no
					}
				}
				no_one_has_more_influence_on_FROM_than_ROOT = yes
			}
			NOT = { has_war_with = FROM }
		}
		visible = {
			FROM = { NOT = { is_subject_of = ROOT } }
			OR = {
				FROM_can_become_free = no
				no_one_has_more_influence_on_FROM_than_ROOT = yes
			}
		}
		cost = 25
		complete_effect = {
			FROM = { add_to_variable = { var = inf_count_@ROOT value = 1 } }
			FROM = {
				add_dynamic_modifier = {
					modifier = gp_influence
					scope = ROOT
					days = 180
				}
				add_to_variable = { var = daily_autonomy_gain value = 0.3 }
			}
		}
		days_remove = 180
		remove_effect = {
			if = {
				limit = { FROM = { is_subject = no } }
				FROM = { add_to_variable = { var = tot_autonomy value = 36 } }
			}
			FROM = {
				remove_dynamic_modifier = {
					modifier = gp_influence
					scope = ROOT
				}
				subtract_from_variable = { var = daily_autonomy_gain value = 0.3 }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				FROM_can_become_free = yes
				no_one_has_more_influence_on_FROM_than_ROOT = yes
				someone_has_equal_influence_on_FROM_as_ROOT = yes
			}
		}
	}
}